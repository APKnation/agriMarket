import{m as R,p as U,u as q,i as A,o,c as i,a as e,t as n,j as l,q as B,f as h,F as k,r as S,g as E,s as r,A as F,v as x,B as j,x as N,y as g,z as D,b as m,k as L,w as K,h as p}from"./index-vxcYk4Au.js";import{E as P}from"./eye-BaW1UGXT.js";import{E as _}from"./eye-off-CZQt8Jmd.js";const $={class:"min-h-screen bg-gradient-to-br from-primary-50 to-earth-50 py-12 px-4 sm:px-6 lg:px-8"},I={class:"max-w-2xl mx-auto"},G={class:"text-center"},H={class:"text-3xl font-bold text-gray-900"},O={class:"mt-2 text-sm text-gray-600"},J={class:"card p-8"},Q={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm"},W={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},X=["value"],Y={class:"text-2xl mb-1"},Z={class:"text-sm font-medium"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},te={for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},ae=["placeholder"],se=["value"],oe={key:1,class:"space-y-6"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le={class:"relative"},ie=["type"],ne={class:"relative"},de=["type"],ue={class:"flex items-center"},me=["disabled"],pe={key:0,class:"flex items-center justify-center"},ce={key:1},ve={class:"text-center mt-6"},fe={class:"text-sm text-gray-600"},we={__name:"RegisterView",setup(ye){const C=R(),w=U(),c=q(),a=p({role:"farmer",firstName:"",lastName:"",phone:"",location:"",farmSize:"",password:"",confirmPassword:"",agreeToTerms:!1}),u=p(!1),d=p(""),v=p(!1),f=p(!1),z=[{value:"farmer",label:"Farmer",icon:"ðŸ‘¨â€ðŸŒ¾"},{value:"buyer",label:"Buyer",icon:"ðŸ›’"},{value:"cooperative",label:"Cooperative",icon:"ðŸ¤"}],M=["Arusha","Dar es Salaam","Dodoma","Geita","Iringa","Kagera","Katavi","Kigoma","Kilimanjaro","Lindi","Manyara","Mara","Mbeya","Morogoro","Mtwara","Mwanza","Njombe","Pwani","Rukwa","Ruvuma","Shinyanga","Simiyu","Singida","Tabora","Tanga"],V=async()=>{if(u.value=!0,d.value="",a.value.password!==a.value.confirmPassword){d.value="Passwords do not match",u.value=!1;return}try{const y={name:`${a.value.firstName} ${a.value.lastName}`,phone:a.value.phone,location:a.value.location,role:a.value.role,password:a.value.password};a.value.role==="farmer"&&(y.farmSize=a.value.farmSize);const t=await w.register(y);if(t.success){const b=w.getRoleBasedRedirect(a.value.role);C.push(b)}else d.value=t.error||"Registration failed. Please try again."}catch{d.value="An unexpected error occurred. Please try again."}finally{u.value=!1}};return(y,t)=>{const b=A("router-link");return o(),i("div",$,[e("div",I,[e("div",G,[t[11]||(t[11]=e("div",{class:"w-20 h-20 bg-primary-600 rounded-full flex items-center justify-center mx-auto mb-4"},[e("span",{class:"text-white font-bold text-3xl"},"SFMP")],-1)),e("h2",H,n(l(c).t("joinSFMP")),1),e("p",O,n(l(c).t("connectTanzanian")),1)]),e("div",J,[e("form",{onSubmit:B(V,["prevent"]),class:"space-y-6"},[d.value?(o(),i("div",Q,n(d.value),1)):h("",!0),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Account Type ",-1)),e("div",W,[(o(),i(k,null,S(z,s=>e("label",{key:s.value,class:E(["relative flex flex-col items-center p-3 border rounded-lg cursor-pointer transition-colors",a.value.role===s.value?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-gray-400"])},[r(e("input",{"onUpdate:modelValue":t[0]||(t[0]=T=>a.value.role=T),value:s.value,type:"radio",class:"sr-only"},null,8,X),[[F,a.value.role]]),e("span",Y,n(s.icon),1),e("span",Z,n(s.label),1)],2)),64))])]),e("div",ee,[e("div",null,[t[13]||(t[13]=e("label",{for:"firstName",class:"block text-sm font-medium text-gray-700 mb-2"}," First Name ",-1)),r(e("input",{id:"firstName","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.firstName=s),type:"text",required:"",class:"input-field",placeholder:"Enter your first name"},null,512),[[x,a.value.firstName]])]),e("div",null,[t[14]||(t[14]=e("label",{for:"lastName",class:"block text-sm font-medium text-gray-700 mb-2"}," Last Name ",-1)),r(e("input",{id:"lastName","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.lastName=s),type:"text",required:"",class:"input-field",placeholder:"Enter your last name"},null,512),[[x,a.value.lastName]])])]),e("div",null,[e("label",te,n(l(c).t("phoneNumber")),1),r(e("input",{id:"phone","onUpdate:modelValue":t[3]||(t[3]=s=>a.value.phone=s),type:"tel",required:"",class:"input-field",placeholder:l(c).t("enterPhone"),pattern:"[\\+]?[0-9\\s]{9,15}"},null,8,ae),[[x,a.value.phone]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700 mb-2"}," Location ",-1)),r(e("select",{id:"location","onUpdate:modelValue":t[4]||(t[4]=s=>a.value.location=s),required:"",class:"input-field"},[t[15]||(t[15]=e("option",{value:""},"Select your region",-1)),(o(),i(k,null,S(M,s=>e("option",{key:s,value:s},n(s),9,se)),64))],512),[[j,a.value.location]])]),a.value.role==="farmer"?(o(),i("div",oe,[e("div",null,[t[17]||(t[17]=e("label",{for:"farmSize",class:"block text-sm font-medium text-gray-700 mb-2"}," Farm Size (hectares) ",-1)),r(e("input",{id:"farmSize","onUpdate:modelValue":t[5]||(t[5]=s=>a.value.farmSize=s),type:"number",step:"0.1",min:"0.1",class:"input-field",placeholder:"Enter farm size in hectares"},null,512),[[x,a.value.farmSize]])])])):h("",!0),e("div",re,[e("div",null,[t[18]||(t[18]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," Password ",-1)),e("div",le,[r(e("input",{id:"password","onUpdate:modelValue":t[6]||(t[6]=s=>a.value.password=s),type:v.value?"text":"password",required:"",class:"input-field pr-10",placeholder:"Create a password"},null,8,ie),[[N,a.value.password]]),e("button",{type:"button",onClick:t[7]||(t[7]=s=>v.value=!v.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[v.value?(o(),g(l(_),{key:1,class:"w-5 h-5 text-gray-400"})):(o(),g(l(P),{key:0,class:"w-5 h-5 text-gray-400"}))])])]),e("div",null,[t[19]||(t[19]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-2"}," Confirm Password ",-1)),e("div",ne,[r(e("input",{id:"confirmPassword","onUpdate:modelValue":t[8]||(t[8]=s=>a.value.confirmPassword=s),type:f.value?"text":"password",required:"",class:"input-field pr-10",placeholder:"Confirm your password"},null,8,de),[[N,a.value.confirmPassword]]),e("button",{type:"button",onClick:t[9]||(t[9]=s=>f.value=!f.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[f.value?(o(),g(l(_),{key:1,class:"w-5 h-5 text-gray-400"})):(o(),g(l(P),{key:0,class:"w-5 h-5 text-gray-400"}))])])])]),e("div",ue,[r(e("input",{id:"terms","onUpdate:modelValue":t[10]||(t[10]=s=>a.value.agreeToTerms=s),type:"checkbox",required:"",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[D,a.value.agreeToTerms]]),t[20]||(t[20]=e("label",{for:"terms",class:"ml-2 block text-sm text-gray-700"},[m(" I agree to the "),e("a",{href:"#",class:"text-primary-600 hover:text-primary-500"},"Terms of Service"),m(" and "),e("a",{href:"#",class:"text-primary-600 hover:text-primary-500"},"Privacy Policy")],-1))]),e("button",{type:"submit",disabled:u.value,class:"w-full btn-primary py-3 text-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?(o(),i("span",pe,[...t[21]||(t[21]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),m(" Creating account... ",-1)])])):(o(),i("span",ce,"Create Account"))],8,me)],32)]),e("div",ve,[e("p",fe,[t[23]||(t[23]=m(" Already have an account? ",-1)),L(b,{to:"/login",class:"font-medium text-primary-600 hover:text-primary-500"},{default:K(()=>[...t[22]||(t[22]=[m(" Sign in here ",-1)])]),_:1})])])])])}}};export{we as default};
