import{d as P,i as $,o as m,c as p,a as e,k as r,j as d,b as y,s as i,v as x,B as h,F as S,r as C,t as o,g as E,w as B,I as D,f as V,q as T,h as c,G as z}from"./index-vxcYk4Au.js";import{u as I}from"./farmers-CnQxxzjL.js";import{P as G}from"./plus-HctYyu7r.js";import{S as Q}from"./search-vThbN0CU.js";import{S as R}from"./star-GGGm7nzH.js";import{E as H}from"./eye-BaW1UGXT.js";import{P as J}from"./pen-square-CDjbir98.js";import{T as K}from"./trash-2-ctTkwP4k.js";const O={class:"min-h-screen bg-earth-50"},W={class:"page-header px-6 py-8"},X={class:"max-w-7xl mx-auto flex justify-between items-center"},Y={class:"max-w-7xl mx-auto px-6 py-8"},Z={class:"card p-6 mb-6"},ee={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},te={class:"relative"},se=["value"],le={class:"card overflow-hidden"},ae={class:"overflow-x-auto"},oe={class:"min-w-full divide-y divide-gray-200"},ie={class:"bg-white divide-y divide-gray-200"},ne={class:"px-6 py-4 whitespace-nowrap"},re={class:"flex items-center"},de={class:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center"},ue={class:"text-white font-medium"},me={class:"ml-4"},pe={class:"text-sm font-medium text-gray-900"},ce={class:"text-sm text-gray-500"},ve={class:"px-6 py-4 whitespace-nowrap"},xe={class:"text-sm text-gray-900"},fe={class:"text-sm text-gray-500"},ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ge={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},be={class:"px-6 py-4 whitespace-nowrap"},we={class:"px-6 py-4 whitespace-nowrap"},he={class:"flex items-center"},_e={class:"ml-1 text-sm text-gray-900"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ke={class:"flex space-x-2"},Se=["onClick"],Ce=["onClick"],Ve=["onClick"],ze={class:"bg-gray-50 px-6 py-3 flex items-center justify-between border-t border-gray-200"},Ue={class:"text-sm text-gray-700"},Le={class:"font-medium"},Ae={class:"font-medium"},Ne={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},qe={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-lg bg-white"},Me={class:"mt-3"},je={class:"text-lg font-medium text-gray-900 mb-4"},Pe={class:"flex justify-end space-x-3 pt-4"},$e={type:"submit",class:"btn-primary"},Je={__name:"FarmerListView",setup(Ee){const n=I(),f=c(""),g=c(""),b=c(""),v=c(""),w=c(!1),u=c(null),a=c({name:"",email:"",phone:"",location:"",farmSize:""}),U=z(()=>{const l=n.getFarmers().map(t=>t.location);return[...new Set(l)]}),_=z(()=>{let l=n.getFarmers();return f.value&&(l=l.filter(t=>t.name.toLowerCase().includes(f.value.toLowerCase())||t.email.toLowerCase().includes(f.value.toLowerCase()))),g.value&&(l=l.filter(t=>g.value==="verified"?t.verified:!t.verified)),b.value&&(l=l.filter(t=>t.location===b.value)),v.value&&(l=l.filter(t=>v.value==="small"?t.farmSize<=3:v.value==="medium"?t.farmSize>=4&&t.farmSize<=7:v.value==="large"?t.farmSize>=8:!0)),l}),L=l=>l.split(" ").map(t=>t[0]).join("").toUpperCase(),A=l=>{u.value=l,a.value={...l},w.value=!0},N=()=>{console.log("saveFarmer called",a.value),console.log("farmersStore:",n),u.value?(console.log("Updating farmer"),n.updateFarmer(u.value.id,a.value)):(console.log("Adding new farmer"),n.addFarmer(a.value)),F(),window.addNotification({type:"success",title:"Farmer Saved",message:`Farmer has been successfully ${u.value?"updated":"added"}.`})},q=l=>{n.verifyFarmer(l),window.addNotification({type:"success",title:"Farmer Verified",message:"Farmer has been successfully verified."})},M=l=>{confirm("Are you sure you want to delete this farmer?")&&(n.deleteFarmer(l),window.addNotification({type:"success",title:"Farmer Deleted",message:"Farmer has been removed from the system."}))},F=()=>{w.value=!1,u.value=null,a.value={name:"",email:"",phone:"",location:"",farmSize:""}};return P(()=>{}),(l,t)=>{const j=$("router-link");return m(),p("div",O,[e("div",W,[e("div",X,[t[11]||(t[11]=e("div",null,[e("h1",{class:"text-3xl font-bold"},"Farmers"),e("p",{class:"text-primary-100 mt-2"},"Manage and monitor registered farmers")],-1)),e("button",{onClick:t[0]||(t[0]=s=>w.value=!0),class:"btn-primary"},[r(d(G),{class:"w-4 h-4 mr-2"}),t[10]||(t[10]=y(" Add Farmer ",-1))])])]),e("div",Y,[e("div",Z,[e("div",ee,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),e("div",te,[r(d(Q),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),type:"text",placeholder:"Search farmers...",class:"input-field pl-10"},null,512),[[x,f.value]])])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),class:"input-field"},[...t[13]||(t[13]=[e("option",{value:""},"All Status",-1),e("option",{value:"verified"},"Verified",-1),e("option",{value:"unverified"},"Unverified",-1)])],512),[[h,g.value]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Location",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>b.value=s),class:"input-field"},[t[15]||(t[15]=e("option",{value:""},"All Locations",-1)),(m(!0),p(S,null,C(U.value,s=>(m(),p("option",{key:s,value:s},o(s),9,se))),128))],512),[[h,b.value]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Farm Size",-1)),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>v.value=s),class:"input-field"},[...t[17]||(t[17]=[e("option",{value:""},"All Sizes",-1),e("option",{value:"small"},"Small (1-3 ha)",-1),e("option",{value:"medium"},"Medium (4-7 ha)",-1),e("option",{value:"large"},"Large (8+ ha)",-1)])],512),[[h,v.value]])])])]),e("div",le,[e("div",ae,[e("table",oe,[t[19]||(t[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Farmer "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Contact "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Location "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Farm Size "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rating "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ie,[(m(!0),p(S,null,C(_.value,s=>(m(),p("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ne,[e("div",re,[e("div",de,[e("span",ue,o(L(s.name)),1)]),e("div",me,[e("div",pe,o(s.name),1),e("div",ce,"ID: #"+o(s.id),1)])])]),e("td",ve,[e("div",xe,o(s.email),1),e("div",fe,o(s.phone),1)]),e("td",ye,o(s.location),1),e("td",ge,o(s.farmSize)+" ha ",1),e("td",be,[e("span",{class:E(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",s.verified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},o(s.verified?"Verified":"Pending"),3)]),e("td",we,[e("div",he,[r(d(R),{class:"w-4 h-4 text-yellow-400 fill-current"}),e("span",_e,o(s.rating),1)])]),e("td",Fe,[e("div",ke,[r(j,{to:`/farmers/${s.id}`,class:"text-primary-600 hover:text-primary-900"},{default:B(()=>[r(d(H),{class:"w-4 h-4"})]),_:1},8,["to"]),e("button",{onClick:k=>A(s),class:"text-accent-600 hover:text-accent-900"},[r(d(J),{class:"w-4 h-4"})],8,Se),s.verified?V("",!0):(m(),p("button",{key:0,onClick:k=>q(s.id),class:"text-green-600 hover:text-green-900"},[r(d(D),{class:"w-4 h-4"})],8,Ce)),e("button",{onClick:k=>M(s.id),class:"text-red-600 hover:text-red-900"},[r(d(K),{class:"w-4 h-4"})],8,Ve)])])]))),128))])])]),e("div",ze,[e("div",Ue,[t[20]||(t[20]=y(" Showing ",-1)),t[21]||(t[21]=e("span",{class:"font-medium"},"1",-1)),t[22]||(t[22]=y(" to ",-1)),e("span",Le,o(_.value.length),1),t[23]||(t[23]=y(" of ",-1)),e("span",Ae,o(d(n).getFarmers().length),1),t[24]||(t[24]=y(" results ",-1))])])])]),w.value?(m(),p("div",Ne,[e("div",qe,[e("div",Me,[e("h3",je,o(u.value?"Edit Farmer":"Add New Farmer"),1),e("form",{onSubmit:T(N,["prevent"]),class:"space-y-4"},[e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.name=s),type:"text",required:"",class:"input-field"},null,512),[[x,a.value.name]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.email=s),type:"email",required:"",class:"input-field"},null,512),[[x,a.value.email]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Phone",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>a.value.phone=s),type:"tel",required:"",class:"input-field"},null,512),[[x,a.value.phone]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>a.value.location=s),type:"text",required:"",class:"input-field"},null,512),[[x,a.value.location]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Farm Size (hectares)",-1)),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>a.value.farmSize=s),type:"number",step:"0.1",required:"",class:"input-field"},null,512),[[x,a.value.farmSize]])]),e("div",Pe,[e("button",{type:"button",onClick:F,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"}," Cancel "),e("button",$e,o(u.value?"Update":"Add")+" Farmer ",1)])],32)])])])):V("",!0)])}}};export{Je as default};
