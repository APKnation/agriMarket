import{p as Ve,L as Ne,d as $e,e as Ee,o as h,c as w,l as E,a as e,k as V,j as y,N as je,t as u,I as Ze,O as Ae,H as Re,y as Be,g as se,E as qe,f as L,s as v,v as O,B as M,F as xe,r as ye,X as be,q as Ge,G as fe,h as T}from"./index-vxcYk4Au.js";import{u as ze}from"./products-szdt5bNY.js";import{W as Xe,a as We,u as He,E as Qe}from"./jspdf.es.min-De8_h25j.js";import"./html2canvas.esm-CBrSDip1.js";import{S as oe}from"./sweetalert2.esm.all-XY7ebsws.js";import{S as Ye}from"./search-vThbN0CU.js";const Je={class:"min-h-screen bg-gray-50"},Ke={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},et={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},tt={class:"bg-white rounded-lg shadow-md border border-gray-200 p-6 hover:shadow-lg transition-shadow"},st={class:"flex items-center"},ot={class:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mr-4"},lt={class:"text-2xl font-bold text-gray-900"},at={class:"bg-white rounded-lg shadow-md border border-gray-200 p-6 hover:shadow-lg transition-shadow"},rt={class:"flex items-center"},nt={class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4"},it={class:"text-2xl font-bold text-gray-900"},dt={class:"bg-white rounded-lg shadow-md border border-gray-200 p-6 hover:shadow-lg transition-shadow"},ut={class:"flex items-center"},ct={class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4"},pt={class:"text-2xl font-bold text-gray-900"},mt={class:"bg-white rounded-lg shadow-md border border-gray-200 p-6 hover:shadow-lg transition-shadow"},gt={class:"flex items-center"},vt={class:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mr-4"},xt={class:"text-2xl font-bold text-gray-900"},yt={class:"bg-white rounded-lg shadow p-4 mb-6"},bt={class:"flex items-center justify-between"},ft={class:"flex items-center"},ht={key:0,class:"ml-2 text-xs text-gray-500"},wt={key:0,class:"flex items-center space-x-4 text-xs text-gray-600"},_t={class:"bg-white rounded-lg shadow p-6 mb-6"},St={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},kt={class:"relative"},Ct={class:"bg-white rounded-lg shadow overflow-hidden"},Ot={class:"overflow-x-auto"},Tt={class:"w-full"},It={class:"bg-white divide-y divide-gray-200"},Pt={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"text-sm font-medium text-gray-900"},Ut={class:"text-xs text-gray-500"},Ft={class:"px-6 py-4 whitespace-nowrap"},Lt={class:"flex items-center"},Mt={class:"w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center mr-3"},Vt={class:"text-xs font-medium text-emerald-800"},Nt={class:"text-sm font-medium text-gray-900"},$t={class:"text-xs text-gray-500"},Et={class:"px-6 py-4 whitespace-nowrap"},jt={class:"text-sm text-gray-900"},Zt={class:"px-6 py-4 whitespace-nowrap"},At={class:"text-sm font-semibold text-gray-900"},Rt={class:"px-6 py-4 whitespace-nowrap"},Bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},qt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"},Gt=["onClick"],zt=["onClick"],Xt=["onClick"],Wt=["onClick"],Ht={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Qt={class:"fixed top-4 left-4 bg-red-500 text-white p-2 rounded z-50"},Yt={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-lg bg-white"},Jt={key:0,class:"mt-3"},Kt={class:"bg-yellow-100 p-2 mb-4 rounded"},es={class:"flex justify-between items-start mb-6"},ts={class:"text-xl font-bold text-gray-900"},ss={class:"text-gray-600"},os={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ls={class:"space-y-4"},as={class:"bg-gray-50 p-4 rounded-lg"},rs={class:"font-medium"},ns={class:"text-sm text-gray-600"},is={class:"text-sm text-gray-600"},ds={class:"bg-gray-50 p-4 rounded-lg"},us={class:"flex justify-between mb-2"},cs={class:"flex justify-between mb-2"},ps={class:"flex justify-between font-bold text-lg"},ms={class:"mt-6 pt-6 border-t"},gs={class:"flex justify-between items-center"},vs={class:"flex items-center space-x-3"},xs={class:"flex space-x-3"},ys={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},bs={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-lg bg-white"},fs={class:"mt-3"},hs={class:"flex justify-end space-x-3 pt-4"},ws={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},_s={class:"relative top-10 mx-auto p-5 border w-11/12 max-w-7xl shadow-lg rounded-lg bg-white max-h-screen overflow-y-auto"},Ss={key:0,class:"mt-3"},ks={class:"flex justify-between items-start mb-6"},Cs={class:"text-xl font-bold text-gray-900"},Os={class:"text-gray-600"},Ts={class:"flex items-center space-x-3"},Is={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},Ps={class:"space-y-4"},Ds={class:"bg-gray-50 p-4 rounded-lg space-y-2"},Us={class:"space-y-4"},Fs={class:"bg-gray-50 p-4 rounded-lg"},Ls={class:"bg-gray-50 p-4 rounded-lg space-y-2"},Ms={class:"flex justify-between"},Vs={class:"text-sm font-medium"},Ns={class:"flex justify-between"},$s={class:"text-sm font-medium"},Es={class:"flex justify-between"},js={class:"text-sm font-medium"},Zs={class:"flex justify-between font-bold text-lg border-t pt-2"},As={class:"mb-6"},Rs={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Bs={class:"w-full"},qs={class:"bg-white divide-y divide-gray-200"},Gs={class:"px-4 py-4"},zs={class:"space-y-2"},Xs=["onUpdate:modelValue"],Ws={key:0},Hs={class:"text-xs text-gray-500"},Qs={class:"px-4 py-4"},Ys=["onUpdate:modelValue"],Js={class:"px-4 py-4"},Ks=["onUpdate:modelValue"],eo={class:"px-4 py-4"},to={class:"text-sm font-medium text-gray-900"},so={class:"px-4 py-4"},oo=["onClick"],lo={class:"mb-6"},ao={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ro={class:"bg-gray-50 p-4 rounded-lg"},no={class:"bg-gray-50 p-4 rounded-lg space-y-3"},io={class:"mb-6"},uo={class:"bg-gray-50 p-4 rounded-lg"},co={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ho={__name:"OrderManagementView",setup(po){Ve();const le=ze(),D=Ne(),{isConnected:N,connect:he,disconnect:we,realTimeOrders:Q,liveMetrics:U,getConnectionColor:ae,getConnectionText:_e}=He(),j=T(""),q=T(""),re=T(""),G=T(""),$=T(!1),Y=T(!1),z=T(!1),m=T(null),i=T(null),J=T(""),K=T(""),Se=()=>{console.log("Loading orders from store..."),D.loadOrders(),console.log("Orders loaded:",D.orders.length),console.log("Order stats:",D.orderStats)};$e(()=>{Se(),he()}),Ee(()=>{we()});const X=fe(()=>{if(N.value&&U.totalOrders>0)return console.log("Using live metrics for order stats"),{pending:U.pendingOrders,confirmed:U.confirmedOrders,delivered:U.deliveredOrders,revenue:U.todayRevenue,totalOrders:U.totalOrders};console.log("Using store data for order stats");const o=D.orderStats;return console.log("Store order stats:",o),o}),ke=fe(()=>{let o=[...D.orders];console.log("Store orders count:",D.orders.length),N.value&&Q.value.length>0&&Q.value.forEach(n=>{o.find(f=>f.id===n.id)||o.unshift(n)}),console.log("All orders count:",o.length),console.log("Real-time orders count:",Q.value.length),console.log("Is connected:",N.value);let t=[...o];return j.value&&(t=t.filter(n=>{var f;return String(n.id).toLowerCase().includes(j.value.toLowerCase())||((f=n.customer)==null?void 0:f.name.toLowerCase().includes(j.value.toLowerCase()))})),q.value&&(t=t.filter(n=>n.status===q.value)),G.value&&(t=t.filter(n=>(n.type||"").toLowerCase().includes(G.value))),console.log("Filtered orders count:",t.length),t}),Ce=o=>o.split(" ").map(t=>t[0]).join("").toUpperCase(),Oe=o=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",processing:"bg-purple-100 text-purple-800",shipped:"bg-indigo-100 text-indigo-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",ee=o=>new Date(o).toLocaleDateString(),Te=o=>{console.log("View order clicked:",o),console.log("showOrderModal before:",$.value),console.log("selectedOrder before:",m.value),m.value=o,i.value=JSON.parse(JSON.stringify(o)),$.value=!0,console.log("showOrderModal after:",$.value),console.log("selectedOrder after:",m.value)},Ie=o=>{m.value=o,i.value={...o},z.value=!0},Pe=o=>{oe.fire({title:"Delete Order?",text:`Order #${o.id} will be removed.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626"}).then(t=>{t.isConfirmed&&D.deleteOrder(o.id)})},ne=()=>{var l;const o=i.value.items.reduce((r,a)=>r+(a.price||0)*(a.quantity||1),0),t=((l=i.value.totals)==null?void 0:l.delivery)||i.value.deliveryFee||2e3,n=Math.round(o*.02),f=o+t+n;i.value.totals={subtotal:o,delivery:t,service:n,total:f},i.value.subtotal=o,i.value.deliveryFee=t,i.value.serviceFee=n,i.value.total=f,D.updateOrder(i.value.id,i.value),z.value=!1,oe.fire({icon:"success",title:"Order Updated!",text:`Order #${i.value.id} has been updated successfully.`,timer:3e3,showConfirmButton:!1})},De=()=>{i.value.items||(i.value.items=[]);const o={id:Date.now(),productId:null,name:"",price:0,quantity:1,unit:"pcs"};i.value.items.push(o)},Ue=o=>{i.value.items&&i.value.items.length>o&&i.value.items.splice(o,1)},Fe=()=>{m.value&&(D.updateOrderStatus(m.value.id,J.value,K.value),Y.value=!1)},ie=async o=>{var de,ue,ce,pe,me,ge;const t=new Qe,n=t.internal.pageSize.getWidth(),f=t.internal.pageSize.getHeight(),l=20;let r=l;const a={primary:[0,102,51],secondary:[255,140,0],black:[0,0,0],white:[255,255,255],gray:[128,128,128],lightGray:[240,240,240]},d=(S,b,c,C=11,p="normal",P=a.black,W="left")=>(t.setFontSize(C),t.setFont("helvetica",p),t.setTextColor(P[0],P[1],P[2]),W==="right"?t.text(S,n-b,c,{align:"right"}):W==="center"?t.text(S,n/2,c,{align:"center"}):t.text(S,b,c),c+C*.4+2),F=(S,b,c,C,p=a.black,P=.5)=>{t.setDrawColor(p[0],p[1],p[2]),t.setLineWidth(P),t.line(S,b,c,C)},I=(S,b,c,C,p=a.black,P=!1)=>{P?(t.setFillColor(p[0],p[1],p[2]),t.rect(S,b,c,C,"F")):(t.setDrawColor(p[0],p[1],p[2]),t.rect(S,b,c,C))};I(l,l,n-l*2,30,a.primary,!0),r=d("SFMP TANZANIA",l,l+8,14,"bold",a.white),r=d("Smart Farming Marketplace",l,r,8,"normal",a.white);let s=l+6;s=d("INVOICE",n-l,s,12,"bold",a.white,"right"),s=d(`#${o.id}`,n-l,s,10,"bold",a.white,"right"),s=d(new Date(o.date).toLocaleDateString(),n-l,s,7,"normal",a.lightGray,"right"),r=l+40,I(l,r,100,35,a.lightGray,!1),r+=6,r=d("CUSTOMER",l+5,r,8,"bold",a.primary),r=d(((de=o.customer)==null?void 0:de.name)||"Customer Name",l+5,r,7,"normal",a.black),r=d(((ue=o.customer)==null?void 0:ue.phone)||"+255 XXX XXX XXX",l+5,r,6,"normal",a.gray),r=d(((ce=o.customer)==null?void 0:ce.location)||"Tanzania",l+5,r,6,"normal",a.gray);let g=l+40;I(n-l-100,g,100,35,a.lightGray,!1),g+=6,g=d("ORDER INFO",n-l-95,g,8,"bold",a.primary),g=d(`Status: ${((pe=o.status)==null?void 0:pe.toUpperCase())||"PENDING"}`,n-l-95,g,6,"normal",a.black);const k=o.status==="delivered"?a.primary:o.status==="confirmed"?a.secondary:(o.status==="pending",a.gray);if(I(n-l-95,g,50,6,k,!0),g=d(((me=o.status)==null?void 0:me.toUpperCase())||"PENDING",n-l-70,g+5,6,"bold",a.white,"center"),g+=10,g=d(`Payment: ${o.paymentMethod||"Cash"}`,n-l-95,g,6,"normal",a.black),g=d(`Delivery: ${((ge=o.delivery)==null?void 0:ge.method)||"Standard"}`,n-l-95,g,6,"normal",a.black),r=l+85,F(l,r,n-l,r,a.primary,2),r+=6,d("ITEM DESCRIPTION",l+5,r,7,"bold",a.primary),d("QTY",l+90,r,7,"bold",a.primary),d("UNIT PRICE",l+120,r,7,"bold",a.primary),d("TOTAL",n-l-30,r,7,"bold",a.primary,"right"),r+=8,F(l,r,n-l,r,a.lightGray,1),r+=4,o.items&&o.items.length>0){const S=f-100,c=Math.floor(S/10);o.items.slice(0,c).forEach((p,P)=>{P%2===0&&I(l,r-1,n-l*2,8,a.lightGray,!0);let W=p.name||`Product ${P+1}`,B=0;if(p.productId){const H=le.getProductById(p.productId);H&&(B=H.price)}B===0&&p.price&&(B=p.price);const ve=t.splitTextToSize(W,85);ve.forEach((H,mo)=>{r=d(H,l+5,r,6,"normal",a.black)});const te=r-(ve.length-1)*2;d(`${p.quantity||1}`,l+90,te,6,"normal",a.black),d(`TZS ${B.toLocaleString()}`,l+120,te,6,"normal",a.black);const Me=B*(p.quantity||1);d(`TZS ${Me.toLocaleString()}`,n-l-30,te,6,"bold",a.primary,"right"),r+=4}),o.items.length>c&&(I(l,r-1,n-l*2,8,a.secondary,!0),r=d(`+ ${o.items.length-c} more items`,n/2,r+5,6,"bold",a.white,"center"))}else r=d("No items found",l+5,r,6,"italic",a.gray);r+=10,F(l,r,n-l,r,a.primary,2),r+=8;let _=0,Z=0,A=0,R=0;console.log("Order items:",o.items),console.log("Order structure:",o),o.totals?(console.log("Using pre-calculated totals from order"),_=o.totals.subtotal||0,Z=o.totals.delivery||0,A=o.totals.service||0,R=o.totals.total||0,console.log("Pre-calculated totals:",{subtotal:_,deliveryFee:Z,serviceFee:A,total:R})):(console.log("Calculating totals manually"),o.items&&o.items.length>0&&(_=o.items.reduce((S,b)=>{let c=0;if(console.log("Processing item:",b),b.productId){const p=le.getProductById(b.productId);p&&(c=p.price,console.log("Found product price:",c))}c===0&&b.price&&(c=b.price,console.log("Using item price:",c)),c===0&&(c=1e3,console.log("Using default price:",c));const C=c*(b.quantity||1);return console.log("Item total:",C),S+C},0)),console.log("Calculated subtotal:",_),Z=o.deliveryFee||(_>0?2e3:0),A=Math.round(_*.02),R=_+Z+A,console.log("Final total:",R));let x=r;x=d("Subtotal:",n-l-100,x,7,"normal",a.black,"right"),d(`TZS ${_.toLocaleString()}`,n-l-20,x-2,7,"bold",a.black,"right"),x=d("Delivery Fee:",n-l-100,x,7,"normal",a.black,"right"),d(`TZS ${Z.toLocaleString()}`,n-l-20,x-2,7,"bold",a.black,"right"),x=d("Service Fee (2%):",n-l-100,x,7,"normal",a.black,"right"),d(`TZS ${A.toLocaleString()}`,n-l-20,x-2,7,"bold",a.black,"right"),x+=6,F(n-l-105,x,n-l-15,x,a.primary,1),x+=4,I(n-l-105,x-3,90,12,a.primary,!0),x=d("TOTAL:",n-l-100,x,8,"bold",a.white,"right"),d(`TZS ${R.toLocaleString()}`,n-l-20,x-3,10,"bold",a.white,"right"),r=f-30,F(l,r,n-l,r,a.primary,2),r+=6,r=d("Thank you for supporting local farmers!",n/2,r,8,"bold",a.primary,"center"),r+=4,r=d("SFMP - Smart Farming Marketplace",n/2,r,6,"normal",a.gray,"center"),r+=3,r=d("support@sfmp.co.tz | +255 123 456 789",n/2,r,5,"normal",a.gray,"center"),d("Page 1",n/2,f-6,5,"normal",a.gray,"center");const Le=new Date().toISOString().split("T")[0];t.save(`SFMP_Invoice_${o.id}_${Le}.pdf`),window.Swal&&oe.fire({icon:"success",title:"Invoice Downloaded!",text:`Compact invoice #${o.id} has been generated successfully.`,timer:2e3,showConfirmButton:!1,position:"top-end",toast:!0})};return(o,t)=>{var n,f,l,r,a,d,F,I;return h(),w("div",Je,[t[70]||(t[70]=E('<div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg"><div class="max-w-7xl mx-auto px-6 py-8"><div class="flex justify-between items-center"><div><h1 class="text-3xl font-bold text-white">Order Management</h1><p class="text-blue-100 mt-2">Track and manage your orders efficiently</p></div><div class="text-right"><div class="text-2xl font-bold text-white">SFMP TANZANIA</div><div class="text-blue-100 text-sm">Smart Farming Marketplace</div></div></div></div></div>',1)),e("div",Ke,[e("div",et,[e("div",tt,[e("div",st,[e("div",ot,[V(y(je),{class:"w-6 h-6 text-yellow-600"})]),e("div",null,[t[20]||(t[20]=e("p",{class:"text-sm text-yellow-600 font-medium"},"Pending Orders",-1)),e("p",lt,u(X.value.pending),1)])])]),e("div",at,[e("div",rt,[e("div",nt,[V(y(Ze),{class:"w-6 h-6 text-blue-600"})]),e("div",null,[t[21]||(t[21]=e("p",{class:"text-sm text-blue-600 font-medium"},"Confirmed Orders",-1)),e("p",it,u(X.value.confirmed),1)])])]),e("div",dt,[e("div",ut,[e("div",ct,[V(y(Ae),{class:"w-6 h-6 text-green-600"})]),e("div",null,[t[22]||(t[22]=e("p",{class:"text-sm text-green-600 font-medium"},"Delivered Orders",-1)),e("p",pt,u(X.value.delivered),1)])])]),e("div",mt,[e("div",gt,[e("div",vt,[V(y(Re),{class:"w-6 h-6 text-purple-600"})]),e("div",null,[t[23]||(t[23]=e("p",{class:"text-sm text-purple-600 font-medium"},"Total Revenue",-1)),e("p",xt,"TZS "+u(X.value.revenue.toLocaleString()),1)])])])]),e("div",yt,[e("div",bt,[e("div",ft,[(h(),Be(qe(y(N)?y(Xe):y(We)),{class:se([y(ae)(),"w-5 h-5 mr-2"])},null,8,["class"])),e("span",{class:se([y(ae)(),"text-sm font-medium"])},u(y(_e)()),3),y(N)?(h(),w("span",ht," Real-time updates active ")):L("",!0)]),y(N)?(h(),w("div",wt,[e("span",null,u(y(U).totalOrders)+" total orders",1),e("span",null,"TZS "+u(y(U).todayRevenue.toLocaleString())+" today",1)])):L("",!0)])]),e("div",_t,[e("div",St,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Orders",-1)),e("div",kt,[V(y(Ye),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>j.value=s),type:"text",placeholder:"Search by order ID or customer...",class:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[O,j.value]])])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>q.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},[...t[25]||(t[25]=[E('<option value="">All Status</option><option value="pending">Pending</option><option value="confirmed">Confirmed</option><option value="processing">Processing</option><option value="shipped">Shipped</option><option value="delivered">Delivered</option><option value="cancelled">Cancelled</option>',7)])],512),[[M,q.value]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date Range",-1)),v(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>re.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},[...t[27]||(t[27]=[E('<option value="">All Time</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="quarter">This Quarter</option>',5)])],512),[[M,re.value]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Order Type",-1)),v(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>G.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},[...t[29]||(t[29]=[e("option",{value:""},"All Types",-1),e("option",{value:"purchase"},"Purchase Orders",-1),e("option",{value:"sale"},"Sale Orders",-1)])],512),[[M,G.value]])])])]),e("div",Ct,[e("div",Ot,[e("table",Tt,[t[31]||(t[31]=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Order ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Customer"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Products"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",It,[(h(!0),w(xe,null,ye(ke.value,s=>{var g,k;return h(),w("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Pt,[e("div",Dt,"#"+u(s.id),1),e("div",Ut,u(s.type||"Purchase Order"),1)]),e("td",Ft,[e("div",Lt,[e("div",Mt,[e("span",Vt,u(Ce(s.customer.name)),1)]),e("div",null,[e("div",Nt,u(s.customer.name),1),e("div",$t,u(s.customer.email),1)])])]),e("td",Et,[e("div",jt,u(((g=s.items)==null?void 0:g.length)||0)+" items",1)]),e("td",Zt,[e("div",At,"TZS "+u((((k=s.totals)==null?void 0:k.total)||s.total||0).toLocaleString()),1)]),e("td",Rt,[e("span",{class:se([Oe(s.status),"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full"])},u(s.status),3)]),e("td",Bt,u(ee(s.date)),1),e("td",qt,[e("button",{onClick:_=>Te(s),class:"text-emerald-600 hover:text-emerald-900"},"View",8,Gt),e("button",{onClick:_=>Ie(s),class:"text-blue-600 hover:text-blue-900"},"Edit",8,zt),e("button",{onClick:_=>ie(s),class:"text-gray-600 hover:text-gray-900"},"PDF",8,Xt),e("button",{onClick:_=>Pe(s),class:"text-red-600 hover:text-red-900"},"Delete",8,Wt)])])}),128))])])])]),$.value?(h(),w("div",Ht,[e("div",Qt," DEBUG: Modal should be visible! showOrderModal: "+u($.value),1),e("div",Yt,[m.value?(h(),w("div",Jt,[e("div",Kt," DEBUG: Order ID: "+u(m.value.id)+", Customer: "+u((n=m.value.customer)==null?void 0:n.name),1),e("div",es,[e("div",null,[e("h3",ts,"Order #"+u(m.value.id),1),e("p",ss,u(m.value.type)+" - "+u(ee(m.value.date)),1)]),e("button",{onClick:t[4]||(t[4]=s=>$.value=!1),class:"text-gray-400 hover:text-gray-600"},[V(y(be),{class:"w-6 h-6"})])]),e("div",os,[e("div",ls,[e("div",null,[t[32]||(t[32]=e("h4",{class:"font-semibold text-gray-900 mb-2"},"Customer Information",-1)),e("div",as,[e("p",rs,u(m.value.customer.name),1),e("p",ns,u(m.value.customer.email),1),e("p",is,u(m.value.customer.phone),1)])])]),e("div",null,[t[36]||(t[36]=e("h4",{class:"font-semibold text-gray-900 mb-2"},"Order Summary",-1)),e("div",ds,[e("div",us,[t[33]||(t[33]=e("span",{class:"text-gray-600"},"Subtotal:",-1)),e("span",null,"TZS "+u((((f=m.value.totals)==null?void 0:f.subtotal)||m.value.subtotal||0).toLocaleString()),1)]),e("div",cs,[t[34]||(t[34]=e("span",{class:"text-gray-600"},"Delivery Fee:",-1)),e("span",null,"TZS "+u((((l=m.value.totals)==null?void 0:l.delivery)||m.value.deliveryFee||0).toLocaleString()),1)]),e("div",ps,[t[35]||(t[35]=e("span",null,"Total:",-1)),e("span",null,"TZS "+u((((r=m.value.totals)==null?void 0:r.total)||m.value.total||0).toLocaleString()),1)])])])]),e("div",ms,[e("div",gs,[e("div",vs,[t[38]||(t[38]=e("label",{class:"text-sm font-medium text-gray-700"},"Order Status:",-1)),v(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>i.value.status=s),class:"px-3 py-1 text-sm font-medium border border-gray-300 rounded-md"},[...t[37]||(t[37]=[E('<option value="pending">Pending</option><option value="confirmed">Confirmed</option><option value="processing">Processing</option><option value="shipped">Shipped</option><option value="delivered">Delivered</option><option value="cancelled">Cancelled</option>',6)])],512),[[M,i.value.status]])]),e("div",xs,[e("button",{onClick:ne,class:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700"}," Save Changes "),e("button",{onClick:t[6]||(t[6]=s=>ie(m.value)),class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700"}," Download Invoice ")])])])])):L("",!0)])])):L("",!0),Y.value?(h(),w("div",ys,[e("div",bs,[e("div",fs,[t[43]||(t[43]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Update Order Status",-1)),e("form",{onSubmit:Ge(Fe,["prevent"]),class:"space-y-4"},[e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"New Status",-1)),v(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>J.value=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md"},[...t[39]||(t[39]=[E('<option value="">Select status</option><option value="pending">Pending</option><option value="confirmed">Confirmed</option><option value="processing">Processing</option><option value="shipped">Shipped</option><option value="delivered">Delivered</option><option value="cancelled">Cancelled</option>',7)])],512),[[M,J.value]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes (Optional)",-1)),v(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=s=>K.value=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Add any notes about this status update..."},null,512),[[O,K.value]])]),e("div",hs,[e("button",{type:"button",onClick:t[9]||(t[9]=s=>Y.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"}," Cancel "),t[42]||(t[42]=e("button",{type:"submit",class:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700"},"Update Status",-1))])],32)])])])):L("",!0),z.value?(h(),w("div",ws,[e("div",_s,[i.value?(h(),w("div",Ss,[e("div",ks,[e("div",null,[e("h3",Cs,"Edit Order #"+u(i.value.id),1),e("p",Os,u(i.value.type)+" - "+u(ee(i.value.date)),1)]),e("div",Ts,[e("button",{onClick:ne,class:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700"}," Save Changes "),e("button",{onClick:t[10]||(t[10]=s=>z.value=!1),class:"text-gray-400 hover:text-gray-600"},[V(y(be),{class:"w-6 h-6"})])])]),e("div",Is,[e("div",Ps,[e("div",null,[t[47]||(t[47]=e("h4",{class:"font-semibold text-gray-900 mb-2"},"Customer Information",-1)),e("div",Ds,[e("div",null,[t[44]||(t[44]=e("label",{class:"block text-xs font-medium text-gray-700"},"Name",-1)),v(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>i.value.customer.name=s),type:"text",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded"},null,512),[[O,i.value.customer.name]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-xs font-medium text-gray-700"},"Email",-1)),v(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>i.value.customer.email=s),type:"email",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded"},null,512),[[O,i.value.customer.email]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-xs font-medium text-gray-700"},"Phone",-1)),v(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>i.value.customer.phone=s),type:"tel",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded"},null,512),[[O,i.value.customer.phone]])])])])]),e("div",Us,[e("div",null,[t[49]||(t[49]=e("h4",{class:"font-semibold text-gray-900 mb-2"},"Order Status",-1)),e("div",Fs,[v(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>i.value.status=s),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md"},[...t[48]||(t[48]=[E('<option value="pending">Pending</option><option value="confirmed">Confirmed</option><option value="processing">Processing</option><option value="shipped">Shipped</option><option value="delivered">Delivered</option><option value="cancelled">Cancelled</option>',6)])],512),[[M,i.value.status]])])])]),e("div",null,[t[54]||(t[54]=e("h4",{class:"font-semibold text-gray-900 mb-2"},"Order Summary",-1)),e("div",Ls,[e("div",Ms,[t[50]||(t[50]=e("span",{class:"text-sm text-gray-600"},"Items:",-1)),e("span",Vs,u(((a=i.value.items)==null?void 0:a.length)||0),1)]),e("div",Ns,[t[51]||(t[51]=e("span",{class:"text-sm text-gray-600"},"Subtotal:",-1)),e("span",$s,"TZS "+u((((d=i.value.totals)==null?void 0:d.subtotal)||i.value.subtotal||0).toLocaleString()),1)]),e("div",Es,[t[52]||(t[52]=e("span",{class:"text-sm text-gray-600"},"Delivery:",-1)),e("span",js,"TZS "+u((((F=i.value.totals)==null?void 0:F.delivery)||i.value.deliveryFee||0).toLocaleString()),1)]),e("div",Zs,[t[53]||(t[53]=e("span",null,"Total:",-1)),e("span",null,"TZS "+u((((I=i.value.totals)==null?void 0:I.total)||i.value.total||0).toLocaleString()),1)])])])]),e("div",As,[t[60]||(t[60]=e("h4",{class:"font-semibold text-gray-900 mb-4"},"Order Items",-1)),e("div",Rs,[e("table",Bs,[t[59]||(t[59]=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Product"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Unit Price"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Quantity"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",qs,[(h(!0),w(xe,null,ye(i.value.items,(s,g)=>(h(),w("tr",{key:g,class:"hover:bg-gray-50"},[e("td",Gs,[e("div",zs,[e("div",null,[t[55]||(t[55]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Product Name",-1)),v(e("input",{"onUpdate:modelValue":k=>s.name=k,type:"text",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"Product name"},null,8,Xs),[[O,s.name]])]),s.productId?(h(),w("div",Ws,[t[56]||(t[56]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Product ID",-1)),e("span",Hs,"#"+u(s.productId),1)])):L("",!0)])]),e("td",Qs,[e("div",null,[t[57]||(t[57]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Price (TZS)",-1)),v(e("input",{"onUpdate:modelValue":k=>s.price=k,type:"number",min:"0",step:"100",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"0"},null,8,Ys),[[O,s.price,void 0,{number:!0}]])])]),e("td",Js,[e("div",null,[t[58]||(t[58]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Quantity",-1)),v(e("input",{"onUpdate:modelValue":k=>s.quantity=k,type:"number",min:"1",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"1"},null,8,Ks),[[O,s.quantity,void 0,{number:!0}]])])]),e("td",eo,[e("div",to," TZS "+u(((s.price||0)*(s.quantity||1)).toLocaleString()),1)]),e("td",so,[e("button",{onClick:k=>Ue(g),class:"text-red-600 hover:text-red-900 text-sm"}," Remove ",8,oo)])]))),128)),e("tr",{class:"bg-gray-50"},[e("td",{colspan:"5",class:"px-4 py-4"},[e("button",{onClick:De,class:"w-full px-4 py-2 bg-emerald-600 text-white text-sm rounded-md hover:bg-emerald-700"}," + Add New Item ")])])])])])]),e("div",lo,[t[64]||(t[64]=e("h4",{class:"font-semibold text-gray-900 mb-4"},"Delivery Information",-1)),e("div",ao,[e("div",ro,[t[61]||(t[61]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Delivery Address",-1)),v(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=s=>i.value.delivery.address=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Enter delivery address"},null,512),[[O,i.value.delivery.address]])]),e("div",no,[e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"City",-1)),v(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>i.value.delivery.city=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"City"},null,512),[[O,i.value.delivery.city]])]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Region",-1)),v(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>i.value.delivery.region=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Region"},null,512),[[O,i.value.delivery.region]])])])])]),e("div",io,[t[69]||(t[69]=e("h4",{class:"font-semibold text-gray-900 mb-4"},"Payment Information",-1)),e("div",uo,[e("div",co,[e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Payment Method",-1)),v(e("select",{"onUpdate:modelValue":t[18]||(t[18]=s=>i.value.payment=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},[...t[65]||(t[65]=[e("option",{value:"cash_on_delivery"},"Cash on Delivery",-1),e("option",{value:"mobile_money"},"Mobile Money",-1),e("option",{value:"bank_transfer"},"Bank Transfer",-1),e("option",{value:"card"},"Card Payment",-1)])],512),[[M,i.value.payment]])]),e("div",null,[t[68]||(t[68]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Payment Status",-1)),v(e("select",{"onUpdate:modelValue":t[19]||(t[19]=s=>i.value.paymentStatus=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},[...t[67]||(t[67]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"paid"},"Paid",-1),e("option",{value:"failed"},"Failed",-1)])],512),[[M,i.value.paymentStatus]])])])])])])):L("",!0)])])):L("",!0)])])}}};export{ho as default};
