import{C as D,m as M,p as N,h as x,d as L,o as i,c as a,a as e,q as F,s as o,v as u,B as f,F as c,r as v,t as d,j as p,l as I,k,M as B,z as w,g as G,X as T,f as z,b as Q,G as R}from"./index-vxcYk4Au.js";import{u as j}from"./products-szdt5bNY.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=D("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),$={class:"min-h-screen bg-earth-50"},E={class:"max-w-4xl mx-auto px-6 py-8"},Z={class:"card"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},O=["value"],J={class:"mt-4"},W={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},X={class:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},Y={class:"flex items-start"},_={class:"text-sm text-blue-800"},tt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},et=["value"],lt={class:"mt-4"},st={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},it=["value"],at={class:"text-sm"},ot={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},rt={class:"mt-4"},nt={class:"flex items-center"},dt={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},ut=["value"],pt={class:"text-sm"},mt={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center"},ct={key:0,class:"mt-4 grid grid-cols-4 gap-4"},vt=["src"],gt=["onClick"],yt={class:"flex justify-end space-x-4 pt-6 border-t"},bt=["disabled"],xt={key:0,class:"flex items-center"},ft={key:1},qt={__name:"ProductCreateView",setup(kt){var P;const C=M(),b=N(),g=j(),y=x(!1),m=x([]),s=x({name:"",category:"",description:"",quantity:"",unit:"",price:"",quality:"",harvestDate:"",location:((P=b.user)==null?void 0:P.location)||"",availableUntil:"",deliveryAvailable:!1,certifications:[],characteristics:[]}),U=["Fresh","Ripe","Clean","Uniform Size","No Defects","Organic","Premium Quality","Farm Fresh","Naturally Grown","Hand Picked"],h=R(()=>{const n={grains:1500,vegetables:2500,fruits:3500,legumes:3e3,processed:5e3,spices:8e3},t={A:1.5,B:1,C:.7},l=n[s.value.category]||2e3,r=t[s.value.quality]||1;return Math.round(l*r)}),S=n=>{Array.from(n.target.files).forEach(l=>{if(l.type.startsWith("image/")){const r=new FileReader;r.onload=q=>{m.value.push(q.target.result)},r.readAsDataURL(l)}})},V=n=>{m.value.splice(n,1)},A=async()=>{y.value=!0;try{const n={...s.value,farmerId:b.user.id,farmerName:b.user.name,images:m.value,rating:0,reviews:0,available:!0},t=g.addProduct(n);window.addNotification({type:"success",title:"Product Listed",message:`${s.value.name} has been successfully listed on the marketplace.`}),C.push("/products")}catch{window.addNotification({type:"error",title:"Listing Failed",message:"Failed to list product. Please try again."})}finally{y.value=!1}};return L(()=>{s.value.harvestDate=new Date().toISOString().split("T")[0]}),(n,t)=>(i(),a("div",$,[t[43]||(t[43]=e("div",{class:"page-header px-6 py-8"},[e("div",{class:"max-w-7xl mx-auto"},[e("h1",{class:"text-3xl font-bold"},"List New Product"),e("p",{class:"text-primary-100 mt-2"},"Add your harvested products to the marketplace")])],-1)),e("div",E,[e("div",Z,[e("form",{onSubmit:F(A,["prevent"]),class:"p-6 space-y-6"},[e("div",null,[t[19]||(t[19]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Basic Information",-1)),e("div",K,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Name *",-1)),o(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s.value.name=l),type:"text",required:"",class:"input-field",placeholder:"e.g., Fresh Maize Kernels"},null,512),[[u,s.value.name]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category *",-1)),o(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.category=l),required:"",class:"input-field"},[t[16]||(t[16]=e("option",{value:""},"Select category",-1)),(i(!0),a(c,null,v(p(g).productCategories,l=>(i(),a("option",{key:l.id,value:l.id},d(l.icon)+" "+d(l.name),9,O))),128))],512),[[f,s.value.category]])])]),e("div",J,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),o(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.description=l),rows:"3",required:"",class:"input-field",placeholder:"Describe your product, quality, and any special characteristics..."},null,512),[[u,s.value.description]])])]),e("div",null,[t[26]||(t[26]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quantity & Pricing",-1)),e("div",W,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Available Quantity *",-1)),o(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.quantity=l),type:"number",min:"1",required:"",class:"input-field",placeholder:"Amount available"},null,512),[[u,s.value.quantity]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Unit *",-1)),o(e("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.unit=l),required:"",class:"input-field"},[...t[21]||(t[21]=[I('<option value="">Select unit</option><option value="kg">Kilograms (kg)</option><option value="g">Grams (g)</option><option value="tons">Tons</option><option value="bags">Bags</option><option value="crates">Crates</option><option value="bunches">Bunches</option>',7)])],512),[[f,s.value.unit]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price per Unit (TZS) *",-1)),o(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.price=l),type:"number",min:"0",step:"100",required:"",class:"input-field",placeholder:"Price in TZS"},null,512),[[u,s.value.price]])])]),e("div",X,[e("div",Y,[k(p(B),{class:"w-5 h-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0"}),e("div",_,[t[24]||(t[24]=e("p",{class:"font-medium mb-1"},"Market Price Reference",-1)),e("p",null,"Current market price for similar products: TZS "+d(h.value.toLocaleString())+" per "+d(s.value.unit||"kg"),1),t[25]||(t[25]=e("p",{class:"text-xs mt-1"},"This is just a reference. You can set your own competitive price.",-1))])])])]),e("div",null,[t[31]||(t[31]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quality & Grading",-1)),e("div",tt,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Quality Grade *",-1)),o(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.quality=l),required:"",class:"input-field"},[t[27]||(t[27]=e("option",{value:""},"Select quality grade",-1)),(i(!0),a(c,null,v(p(g).qualityGrades,l=>(i(),a("option",{key:l.quality,value:l.quality},d(l.grade)+" - "+d(l.description),9,et))),128))],512),[[f,s.value.quality]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Harvest Date *",-1)),o(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>s.value.harvestDate=l),type:"date",required:"",class:"input-field"},null,512),[[u,s.value.harvestDate]])])]),e("div",lt,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Quality Characteristics",-1)),e("div",st,[(i(),a(c,null,v(U,l=>e("label",{key:l,class:"flex items-center space-x-2 cursor-pointer"},[o(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>s.value.characteristics=r),value:l,type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,8,it),[[w,s.value.characteristics]]),e("span",at,d(l),1)])),64))])])]),e("div",null,[t[36]||(t[36]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Location & Availability",-1)),e("div",ot,[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pickup Location *",-1)),o(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>s.value.location=l),type:"text",required:"",class:"input-field",placeholder:"e.g., Arusha, Tanzania"},null,512),[[u,s.value.location]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Available Until",-1)),o(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>s.value.availableUntil=l),type:"date",class:"input-field"},null,512),[[u,s.value.availableUntil]]),t[34]||(t[34]=e("p",{class:"text-xs text-gray-500 mt-1"},"Leave empty if available until sold out",-1))])]),e("div",rt,[e("label",nt,[o(e("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>s.value.deliveryAvailable=l),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[w,s.value.deliveryAvailable]]),t[35]||(t[35]=e("span",{class:"ml-2 text-sm text-gray-700"},"Delivery available within region",-1))])])]),e("div",null,[t[37]||(t[37]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Certifications",-1)),t[38]||(t[38]=e("p",{class:"text-sm text-gray-600 mb-3"},"Select any certifications your product has:",-1)),e("div",dt,[(i(!0),a(c,null,v(p(g).certifications,l=>(i(),a("label",{key:l.id,class:G(["flex items-center space-x-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-50",s.value.certifications.includes(l.id)?"border-primary-500 bg-primary-50":"border-gray-300"])},[o(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>s.value.certifications=r),value:l.id,type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,8,ut),[[w,s.value.certifications]]),e("span",pt,d(l.icon)+" "+d(l.name),1)],2))),128))])]),e("div",null,[t[41]||(t[41]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Product Images",-1)),e("div",mt,[k(p(H),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t[39]||(t[39]=e("p",{class:"text-sm text-gray-600 mb-2"},"Click to upload or drag and drop",-1)),t[40]||(t[40]=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB each",-1)),e("input",{type:"file",multiple:"",accept:"image/*",class:"hidden",onChange:S},null,32),e("button",{type:"button",onClick:t[13]||(t[13]=l=>l.target.previousElementSibling.click()),class:"mt-4 btn-secondary"}," Select Images ")]),m.value.length>0?(i(),a("div",ct,[(i(!0),a(c,null,v(m.value,(l,r)=>(i(),a("div",{key:r,class:"relative group"},[e("img",{src:l,class:"w-full h-24 object-cover rounded-lg"},null,8,vt),e("button",{type:"button",onClick:q=>V(r),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity"},[k(p(T),{class:"w-3 h-3"})],8,gt)]))),128))])):z("",!0)]),e("div",yt,[e("button",{type:"button",onClick:t[14]||(t[14]=l=>n.$router.go(-1)),class:"px-6 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"}," Cancel "),e("button",{type:"submit",disabled:y.value,class:"btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed"},[y.value?(i(),a("span",xt,[...t[42]||(t[42]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Q(" Listing Product... ",-1)])])):(i(),a("span",ft,"List Product"))],8,bt)])],32)])])]))}};export{qt as default};
